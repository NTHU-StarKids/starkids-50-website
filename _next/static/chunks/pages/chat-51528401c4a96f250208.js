(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{6991:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return E}});var l=t(2809),s=t(7484),a=t.n(s),n=t(7294),c=t(7814),o=t(9398),i=t(8315),d=t(5077),u=t(6612),m=t(7687),f=t(8767),p=t(266),h=t(809),x=t.n(h),g=t(9669),b=t.n(g),w=t(6264),j=b().create({baseURL:"https://starkids-50-nodejs.herokuapp.com/"}),v=function(){var e=(0,p.Z)(x().mark((function e(r){var t,l,s,a,n,c,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.url,l=r.method,s=void 0===l?"POST":l,a=r.body,n=w.decamelizeKeys(a),e.next=4,j({url:t,method:s,data:n});case 4:return c=e.sent,o=w.camelizeKeys(c.data),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),y=function(){return v({url:"/chats",method:"GET"})},N=t(5893);function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r&&(l=l.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,l)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(Object(t),!0).forEach((function(r){(0,l.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var _=function(e){var r=e.name,t=e.profileUrl,l=e.isSelf,s=e.sentAt,n=e.messages;return(0,N.jsxs)("div",{className:"flex w-full sm:w-5/6 md:w-4/5 lg:w-2/3 ".concat(l?"flex-row-reverse ml-auto":""),children:[(0,N.jsx)("div",{className:"w-8 md:w-12",children:(0,N.jsx)("div",{className:"relative w-8 md:w-12 h-8 md:h-12 rounded-full bg-center bg-cover",style:{backgroundImage:"url('".concat(t,"')")}})}),(0,N.jsx)("div",{className:"w-full text-left px-2 md:px-3",children:n.map((function(e,t){return(0,N.jsxs)("div",{className:"font-light",children:[0==t&&(l?(0,N.jsxs)("p",{className:"tracking-wide text-gray-50 leading-4 text-right",children:[(0,N.jsx)("span",{className:"mr-2 text-sm text-gray-200",children:a()(s).format("YYYY/MM/DD HH:mm")}),r]}):(0,N.jsxs)("p",{className:"tracking-wide text-gray-50 leading-4",children:[r,(0,N.jsx)("span",{className:"ml-2 text-sm text-gray-200",children:a()(s).format("YYYY/MM/DD HH:mm")})]})),(0,N.jsx)("div",{className:"w-full flex ".concat(l?"justify-end":"justify-start"),children:(0,N.jsx)("div",{className:"mt-1 p-3 rounded-2xl tracking-wide ".concat(l?"bg-purple-600 text-white":"bg-white text-black"," ").concat(0==t?l?"rounded-tr-none":"rounded-tl-none":""),children:e.text})})]},"message-".concat(t))}))})]})},P=function(e){var r=e.disabled,t=e.messageGroups;return(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(i.H2,{className:"mb-10",children:"\u7559\u8a00\u677f"}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("div",{className:"absolute w-full -top-4 flex justify-center z-20",children:(0,N.jsx)("div",{className:"rounded-full bg-purple-500 h-8 px-4 py-2 text-lg leading-4 tracking-wider",children:"\u6b61\u8fce\u4f86\u5230\u7559\u8a00\u677f rrrrrr"})}),(0,N.jsxs)("div",{className:"relative bg-gray-600 w-full h-116 sm:h-132 md:h-148 lg:h-164 xl:h-180 2xl:h-200 rounded-xl overflow-y-scroll",children:[(0,N.jsx)("div",{className:"absolute left-0 bottom-24 flex flex-col gap-4 w-full max-h-92 sm:max-h-108 md:max-h-124 lg:max-h-140 xl:max-h-156 2xl:max-h-176 px-2 pb-3 pt-6 lg:p-4 overflow-y-scroll",children:t.map((function(e,r){return(0,N.jsx)(_,O({},e),"messageGroup-".concat(r))}))}),(0,N.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-24 border-t-2 border-gray-500 px-2 md:px-4 py-2",children:(0,N.jsxs)("div",{className:"flex gap-1 h-full",children:[(0,N.jsx)("div",{className:"flex w-12 md:w-16 h-full",children:(0,N.jsx)("div",{className:"relative self-center w-12 md:w-16 h-12 md:h-16 rounded-full bg-center bg-cover cursor-pointer",style:{backgroundImage:"url('".concat("/img/profile/sample-profile-1@4x.png","')")},children:(0,N.jsx)("div",{className:"absolute right-0 bottom-0 w-6 h-6 rounded-full bg-purple-500 p-1",children:(0,N.jsx)(c.G,{icon:o.V$d})})})}),(0,N.jsxs)("div",{className:"w-full h-full flex flex-col gap-2 pl-1 md:pl-2",children:[(0,N.jsx)("div",{className:"w-3/4 sm:w-1/2 h-9 bg-white rounded-full px-3.5 overflow-hidden",children:(0,N.jsx)("input",{type:"text",className:"form-input w-full h-full px-0 rounded placeholder-gray-400 text-black tracking-wider border-none outline-none focus:ring-0 focus:ring-transparent",name:"nickname",placeholder:"\u540d\u5b57/\u66b1\u7a31",disabled:r,autoComplete:"off"})}),(0,N.jsxs)("div",{className:"relative w-full h-9 bg-white rounded-full px-3.5 overflow-hidden",children:[(0,N.jsx)("textarea",{className:"form-textarea w-full h-full px-0 pt-1.5 rounded placeholder-gray-400 text-black tracking-wider border-none outline-none focus:ring-0 focus:ring-transparent",name:"message",placeholder:"\u8f38\u5165\u8a0a\u606f",disabled:r}),(0,N.jsx)("div",{className:"absolute w-8 h-8 rounded-full p-1.5 pl-1 ".concat(r?"bg-gray-400 cursor-not-allowed":"bg-purple-500 cursor-pointer"),style:{bottom:"0.09rem",right:"0.125rem"},children:(0,N.jsx)(c.G,{icon:o.XCy})})]})]})]})})]})]})]})};function E(){var e,r=(0,n.useState)([]),t=r[0],l=r[1],s=(0,f.useQuery)("chats",y,e),a=s.data,c=s.isLoading;return(0,n.useEffect)((function(){if(!c){console.log(a.chats,"data.chats");var e=a.chats.map((function(e){return O(O({},e),{},{isSelf:!1,profileUrl:m.Al[e.profile],messages:[{sentAt:e.sentAt,text:e.text}]})}));l(e)}}),[c]),(0,N.jsx)(u.Z,{title:"\u7559\u8a00\u677f",children:(0,N.jsx)(P,{disabled:c,messageGroups:t})})}},8984:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return t(6991)}])}},function(e){e.O(0,[774,523,342,643,612,888,179],(function(){return r=8984,e(e.s=r);var r}));var r=e.O();_N_E=r}]);